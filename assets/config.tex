% -----------------------------------------------------------------------
%                               PACKAGES
% -----------------------------------------------------------------------

\usepackage[paperheight=29.7cm,paperwidth=21cm,outer=1.5cm,inner=2.5cm,top=2cm,bottom=2cm]{geometry}
\usepackage[english]{babel}
\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{titlesec}
\usepackage[titles]{tocloft}
\usepackage[nottoc]{tocbibind}
\usepackage{blindtext}
\usepackage{color}
\usepackage[table]{xcolor} % Table midrule color
\usepackage{epsfig}
\usepackage{plain}

\usepackage{setspace}
\singlespacing

% DRAFT background
%\usepackage{background}
%\backgroundsetup{contents=DRAFT}

\usepackage{listings}
%\usepackage{pxfonts}
\lstset{language=Python,
  basicstyle=\ttfamily\fontsize{11}{11},
  keywordstyle=\bfseries,
	numbers=left,
	numberstyle=\tiny\color{dimgray},
  stepnumber=1,
  showstringspaces=false,
	xleftmargin=3.0ex,
    morekeywords={include, printf}
}
\usepackage{fancyvrb}

\usepackage{chronology} % Timeline
\tikzset{flippedeventlabel/.append style={align=center}}

\usepackage{tikz}
\usetikzlibrary{positioning}

\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
            \node[shape=circle,fill,inner sep=1pt,font=\fontsize{8}{8}\selectfont] (char) {\textcolor{white}{#1}};}}

%\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
%            \node[shape=circle,draw,inner sep=1pt,font=\fontsize{8}{8}\selectfont] (char) {#1};}}

% -----------------------------------------------------------------------
%                              FONTAWESOME
% -----------------------------------------------------------------------

\usepackage{fontawesome5}
% Needed to have different sizes for fontawesome
\DeclareFontFamily{U}{fontawesomeOne}{}
\DeclareFontShape{U}{fontawesomeOne}{m}{n}
  {<-> FontAwesome--fontawesomeone}{}
\DeclareRobustCommand\FAone{\fontencoding{U}\fontfamily{fontawesomeOne}\selectfont}

\newcommand{\itemAR}{\item[\faAngleRight]}

% -----------------------------------------------------------------------
%                                TABLES
% -----------------------------------------------------------------------

\usepackage{booktabs} 
\usepackage{colortbl} 
\usepackage{xcolor} 
\usepackage{xfrac}

\newcommand{\ra}[1]{\renewcommand{\arraystretch}{#1}}

% -----------------------------------------------------------------------
%                             FONT & DROP CAPs
% -----------------------------------------------------------------------

% Drop cap implementation
\usepackage{type1cm}
\usepackage{lettrine}
%\usepackage{mathptmx} % Times New Roman
\usepackage{lmodern} % Font used for the document

% -----------------------------------------------------------------------
%                             REFERENCES
% -----------------------------------------------------------------------

% Clickable references
\usepackage{hyperref}
\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=black,
    urlcolor=black
}

% Custom boxed/framed environments
\usepackage[framemethod=tikz]{mdframed}

% Black and white images
\usepackage{graphicx}

\usepackage{caption} % link to the image/table, not to the caption

\usepackage{natbib} % fancy references

\renewcommand*\cite[2][]{\citep[{\fontsize{7}{7}\faBookmark[regular]}][#1]{#2}} % bookmark fontawesome icon added to references

\usepackage{lipsum} % To be removed

% -----------------------------------------------------------------------
%                             	GLOSSARY
% -----------------------------------------------------------------------

\usepackage[acronym, toc]{glossaries-extra}
%\setglossarysection{chapter}
\renewcommand{\glsfirstlongdefaultfont}[1]{\emph{#1}}
\setabbreviationstyle[acronym]{long-short}
\makenoidxglossaries

% -----------------------------------------------------------------------
%                             FANCY TITLES and ToC
% -----------------------------------------------------------------------

\definecolor{gray75}{gray}{0.75}

\definecolor{dimgray}{rgb}{0.41, 0.41, 0.41}

% Fancy TOC
\renewcommand\cftchapfont{\normalfont}
\renewcommand\cftchappagefont{\normalfont}
\renewcommand{\cftchapafterpnum}{\vskip 5pt}
\renewcommand\cftsecafterpnum{\vskip 5pt}
\renewcommand\cftsubsecafterpnum{\vskip 5pt}
\setlength\cftbeforesecskip{0pt}
\setlength\cftbeforesubsecskip{0pt}

\AtBeginDocument{\renewcommand\contentsname{Table of Contents}}

\titleformat{\chapter}[display]
{}{\hfill\rule{.7\textwidth}{3pt}}{0pt}
{\hspace*{.3\textwidth}\huge\bfseries}[\addvspace{-1pt}]
\titleformat{name=\chapter,numberless}[display]
{}{\hfill\rule{.7\textwidth}{3pt}}{0pt}
{\hspace*{.3\textwidth}\huge\bfseries}[\addvspace{-1pt}]

% \part* title and add to ToC
\titleformat{\part}{\center\normalfont\Huge\bfseries}{}{0pt}{}

% Fancy chapter titles
\newcommand{\hsp}{\hspace{20pt}}
\titleformat{\chapter}[hang]{\Huge\bfseries}{\thechapter\hsp\textcolor{gray75}{|}\hsp}{0pt}{\Huge\bfseries}

% -----------------------------------------------------------------------
%                               CODE BOX
% -----------------------------------------------------------------------

\usepackage[most]{tcolorbox}
\usepackage{inconsolata}

\newtcblisting[auto counter]{code}[2][]{sharp corners, 
    fonttitle=\texttt, colframe=dimgray, listing only, 
    listing options={basicstyle=\ttfamily,language=Python,firstnumber=92,title={TEST}}, 
    title={\fontsize{7}{7}\faTerminal}\; #2, #1}

% -----------------------------------------------------------------------
%                           DIRECTORY TREE
% -----------------------------------------------------------------------

\usepackage{forest}
\useforestlibrary{edges}
\forestapplylibrarydefaults{edges}
\tikzset{%
  mkdir/.pic={%
    \draw [pic actions] (0,-4*\mkdirsize) -- ++(0,8*\mkdirsize) -- ++(\mkdirsize,\mkdirsize) -- ++(5*\mkdirsize,0) -- ++(\mkdirsize,-\mkdirsize) -- ++(5*\mkdirsize,0) |- cycle;
  },
  touch/.pic={%
    \draw [pic actions] (0,-6*\touchsize) |- ++(5*\touchsize,12*\touchsize) edge ++(3*\touchsize,-3*\touchsize) |- ++(3*\touchsize,-3*\touchsize) |- cycle;
  },
  mkdir size/.store in=\mkdirsize,
  touch size/.store in=\touchsize,
  icon sep/.store in=\iconsep,
  icon sep from path/.store in=\iconsepfrompath,
  mkdir size=.2ex,
  touch size=.2ex,
  icon sep=1.5ex,
  icon sep from path=1ex,
}
\forestset{%
  optional/.style={%
    content/.wrap value={$<$\hspace{0.05em}\normalfont\itshape ##1\hspace{0.15em}$>$},
  },
}